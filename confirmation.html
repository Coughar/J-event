<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Confirmation - J-event</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

 <header>
  <a href="index.html" class="logo">J-event</a>

  <!-- MENU BURGER MOBILE -->
  <input type="checkbox" id="menu-toggle">
  <label for="menu-toggle" class="menu-icon">&#9776;</label>

  <!-- MENU NAVIGATION -->
  <nav class="nav-links">
    <ul>
      <li><a href="index.html">Accueil</a></li>
      <li><a href="products.html">√âv√©nements</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <!-- PANIER FIXE √Ä DROITE -->
  <a href="cart.html" class="cart-icon">
    üõí <span id="cart-count">0</span>
  </a>
</header>


  <main class="confirmation">
    <h1>Validez votre commande</h1>
    <form id="livraison-form">
      <div class="form-group">
        <label for="nom">Nom complet :</label>
        <input type="text" id="nom" required>
      </div>

      <div class="form-group">
        <label for="telephone">T√©l√©phone :</label>
        <input type="tel" id="telephone" required>
      </div>

      <div class="form-group">
        <label for="adresse">Adresse :</label>
        <textarea id="adresse" required></textarea>
      </div>

      <button type="submit" class="btn">Envoyer la commande via WhatsApp</button>
    </form>
  </main>

  <footer>
    <p>&copy; 2025 J-event. Tous droits r√©serv√©s.</p>
  </footer>

 <script>
  const form = document.getElementById("livraison-form");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const nom = document.getElementById("nom").value;
    const telephone = document.getElementById("telephone").value;
    const adresse = document.getElementById("adresse").value;

    // 1. On r√©cup√®re d'abord le panier
    const panier = JSON.parse(localStorage.getItem('panier')) || [];

    // 2. On construit le message
    let message = `Bonjour, je souhaite passer une commande via J-event :\n\n`;

    if (panier.length === 0) {
      message += `‚ö†Ô∏è Aucun produit s√©lectionn√©.\n`;
    } else {
      panier.forEach(item => {
        message += `- ${item.nom} x${item.quantite} (${item.prix * item.quantite} FCFA)\n`;
      });
    }

    message += `\nüë§ Nom : ${nom}\nüìû T√©l√©phone : ${telephone}\nüìç Adresse : ${adresse}`;

    // 3. On construit le lien WhatsApp (encode)
    const numeroWhatsApp = "24162692782";
    const lien = "https://wa.me/" + numeroWhatsApp + "?text=" + encodeURIComponent(message);

    // 4. On redirige d'abord, puis on vide le panier juste apr√®s un petit d√©lai
    window.location.href = lien;

    // ‚úÖ On vide le panier un peu apr√®s pour laisser WhatsApp s‚Äôouvrir tranquillement
    setTimeout(() => {
      localStorage.removeItem('panier');
    }, 3000); // 3 secondes
  });
</script>


</body>
</html>
